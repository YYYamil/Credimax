<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PrestamoApp.ResumenCtaPage"
             Title="Resumen de Cuenta"
             BackgroundColor="White">


    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="10">

            <!-- Cliente -->
            <Label Text="Cliente" FontAttributes="Bold" FontSize="18" />
            <HorizontalStackLayout>
                <Label Text="Apellido: " FontAttributes="Italic"/>
                <Label x:Name="lblApellido"/>
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Nombre: " FontAttributes="Italic"/>
                <Label x:Name="lblNombre"/>
            </HorizontalStackLayout>

            <!-- Datos del crédito -->
            <Label Text="Crédito" FontAttributes="Bold" FontSize="18" Margin="0,10,0,0"/>
            <HorizontalStackLayout>
                <Label Text="Tipo de Crédito: " />
                <Label x:Name="lblTipoCredito" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Observación: " />
                <Label x:Name="lblObservacion" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Monto Crédito: " />
                <Label x:Name="lblMontoCredito" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Suma Pagada: " />
                <Label x:Name="lblSumaPago" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Saldo Total: " />
                <Label x:Name="lblSaldoTotal" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Monto Financiado: " />
                <Label x:Name="lblMontoFinanciado" />
            </HorizontalStackLayout>
            <HorizontalStackLayout>
                <Label Text="Fecha Otorgamiento:" FontAttributes="Bold"/>
                <Label x:Name="lblFechaOtorgamiento" />
            </HorizontalStackLayout>

            
            <!-- Título -->
            <Label Text="Detalle de Cuotas"
       FontAttributes="Bold"
       FontSize="18"
       Margin="0,16,0,8" />

            <!-- Cabeceras -->
            <Grid Padding="8" Margin="10,0"
      ColumnSpacing="8"
      BackgroundColor="#F5F5F5">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="60" />
                    <!-- N° -->
                    <ColumnDefinition Width="100" />
                    <!-- F. Vto -->
                    <ColumnDefinition Width="100" />
                    <!-- F. Pago -->
                    <ColumnDefinition Width="100" />
                    <!-- Importe -->
                    <ColumnDefinition Width="*" />
                    <!-- Estado -->
                </Grid.ColumnDefinitions>

                <Label Text="N°"        FontAttributes="Bold" Grid.Column="0"/>
                <Label Text="F. Vto"    FontAttributes="Bold" Grid.Column="1"/>
                <Label Text="F. Pago"   FontAttributes="Bold" Grid.Column="2"/>
                <Label Text="Importe"   FontAttributes="Bold" Grid.Column="3"/>
                <Label Text="Estado"    FontAttributes="Bold" Grid.Column="4"/>
            </Grid>

            <!-- Lista -->
            <!-- Lista -->
            <ListView x:Name="cuotasListView"
          HasUnevenRows="True"
          SeparatorVisibility="None"
          BackgroundColor="Transparent"
          Margin="10,4,10,16">
                <ListView.ItemTemplate>
                    <DataTemplate>
                        <ViewCell>
                            <Frame Padding="0" Margin="0,6"
                       CornerRadius="6"
                       HasShadow="False"
                       BackgroundColor="White"
                       BorderColor="#DDDDDD">
                                <Grid Padding="8" ColumnSpacing="8">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="60" />
                                        <ColumnDefinition Width="100" />
                                        <ColumnDefinition Width="100" />
                                        <ColumnDefinition Width="100" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>

                                    <!-- N° -->
                                    <Label Text="{Binding NumeroCuota}"
                               Grid.Column="0" VerticalTextAlignment="Center"/>

                                    <!-- F. Vto -->
                                    <Label Text="{Binding FechaVto, StringFormat='{0:dd/MM/yyyy}'}"
                               Grid.Column="1" VerticalTextAlignment="Center"/>

                                    <!-- F. Pago (null = "-") -->
                                    <Label Text="{Binding FechaPago, StringFormat='{0:dd/MM/yyyy}', TargetNullValue='-'}"
                               Grid.Column="2" VerticalTextAlignment="Center"/>

                                    <!-- Importe -->
                                    <Label Text="{Binding MontoPagado, StringFormat='${0:N2}'}"
                               Grid.Column="3" VerticalTextAlignment="Center"/>

                                    <!-- Estado -->
                                    <Label Text="{Binding Estado}"
                               Grid.Column="4" VerticalTextAlignment="Center"/>
                                </Grid>
                            </Frame>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>





            <!-- Botón para compartir -->
            <Button Text="Compartir por WhatsApp"
                    Clicked="OnShareClicked"
                    BackgroundColor="Green"
                    TextColor="White"
                    FontAttributes="Bold"
                    Margin="0,20,0,0"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
